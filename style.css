    /* 1. GIAO DIỆN CHUNG & MÀU SẮC */
    :root {
        --header-bg: #2E7D32;
        --kpi-bg: #43a047; --bg-body: #f0f2f5;
        --tab-active-bg: #2E7D32; --tab-active-color: #fff;
        --modal-header-bg: #2E7D32; --modal-header-text: #fff;
        --label-color: #1B5E20; --value-color: #000;
        --icon-color: #2E7D32; --edit-btn-bg: #FF9800;
        --detail-border: #ccc;
    }
    body { background-color: var(--bg-body); font-family: 'Segoe UI', sans-serif; font-size: 0.85rem; }

    /* 2. GIỮ NGUYÊN CÁC PHẦN CŨ (LOGIN, DASHBOARD, KPI...) */
    #loginSection { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #2E7D32 0%, #66BB6A 100%); padding: 20px; overflow-y: auto; }
    .login-wrapper { display: flex; width: 100%; max-width: 1100px; gap: 40px; align-items: center; justify-content: center; }
    .login-brand-side { flex: 1.5; text-align: center; color: white; padding: 20px; }
    .login-logo-container { background: white; padding: 10px 20px; border-radius: 10px; display: inline-block; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); }
    .login-logo-main { height: auto; max-height: 100px; max-width: 100%; object-fit: contain; }
    .login-project-vi { font-size: 1.7rem; font-weight: 800; text-transform: uppercase; margin-bottom: 10px; line-height: 1.3; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    .login-project-en { font-size: 1.1rem; font-weight: 500; font-style: italic; opacity: 0.95; text-shadow: 0 1px 2px rgba(0,0,0,0.2); }
    .login-form-side { flex: 1; max-width: 480px; width: 100%; }
    .login-card { background: white; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.25); padding: 30px; text-align: center; }
    .org-btn-group { display: flex; flex-direction: row; gap: 8px; margin-bottom: 15px; width: 100%; justify-content: space-between; }
    .btn-org { flex: 1; background-color: #f8f9fa; border: 1px solid #ddd; color: #555; font-weight: 600; padding: 10px 5px; border-radius: 6px; transition: all 0.2s; text-align: center; font-size: 0.8rem; display: flex; flex-direction: column; align-items: center; justify-content: center; }
    .btn-org:hover { background-color: #e8f5e9; border-color: #2E7D32; color: #2E7D32; }
    .btn-org.active { background-color: #2E7D32; border-color: #2E7D32; color: white; box-shadow: 0 3px 5px rgba(46, 125, 50, 0.3); }
    .org-icon { height: 24px; width: auto; max-width: 100%; object-fit: contain; margin-bottom: 5px; display: block; filter: grayscale(100%); opacity: 0.8; transition: all 0.2s; }
    .btn-org:hover .org-icon, .btn-org.active .org-icon { filter: none; opacity: 1; } .btn-org.active .org-icon { filter: brightness(0) invert(1); }
    .login-divider { border: 0; height: 2px; background-image: linear-gradient(to right, rgba(46, 125, 50, 0), rgba(46, 125, 50, 0.75), rgba(46, 125, 50, 0)); margin: 20px 0; }
    .login-intro-text { font-size: 0.9rem; color: #666; margin-bottom: 10px; font-style: italic; text-align: left; }
    .login-form-group { margin-bottom: 20px; text-align: left; }
    .login-btn { background-color: #2E7D32; color: white; width: 100%; font-weight: bold; padding: 12px; border: none; border-radius: 8px; transition: all 0.3s; font-size: 1.1rem; box-shadow: 0 4px 6px rgba(46, 125, 50, 0.3); }
    .login-btn:hover { background-color: #1B5E20; transform: translateY(-2px); }
    .login-footer { margin-top: 20px; font-size: 0.8rem; color: #888; }
    @media (max-width: 992px) { .login-wrapper { flex-direction: column; gap: 20px; } .login-brand-side { padding: 0; flex: auto; } .login-project-vi { font-size: 1.4rem; } .login-project-en { font-size: 0.9rem; } .login-logo-main { max-height: 80px; } }
    @media (max-width: 576px) { #loginSection { align-items: flex-start; padding-top: 40px; } .login-logo-container { width: 100%; padding: 5px 10px; } .login-card { padding: 20px; } .org-btn-group { flex-wrap: wrap; } .btn-org { min-width: 30%; } }

    #dashboardSection { display: none; }
    .navbar-custom { background-color: var(--header-bg); color: white; padding: 5px 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); min-height: 80px; }
    .header-content { display: flex; align-items: center; justify-content: space-between; width: 100%; }
    .app-logo { height: 60px; width: auto; max-width: 100%; object-fit: contain; background-color: white; padding: 2px; border-radius: 4px; }
    .app-title { font-weight: bold; text-transform: uppercase; text-align: center; flex-grow: 1; padding: 0 15px; line-height: 1.2; display: flex; flex-direction: column; justify-content: center; }
    .title-vi { font-size: 1.7rem; display: block; } .title-en { font-size: 1.4rem; display: block; font-weight: normal; opacity: 0.9; margin-top: 5px; }
    @media (max-width: 992px) { .navbar-custom { min-height: 60px; } .app-logo { height: 40px; } .title-vi { font-size: 1.0rem; margin-bottom: 2px; } .title-en { font-size: 0.75rem; margin-top: 0; } }
    .btn-lang { border: none; background: transparent; padding: 0; } .btn-lang:hover { transform: scale(1.1); } .flag-icon { width: 32px; height: 24px; object-fit: cover; border-radius: 3px; border: 1px solid #fff; }
    
    .kpi-card { background-color: var(--kpi-bg); color: white; border-radius: 0; padding: 10px; text-align: center; height: 100%; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: transform 0.2s; } .kpi-card:hover { transform: translateY(-3px); } .kpi-value { font-size: 1.5rem; font-weight: bold; margin-bottom: 0; } .kpi-label { font-size: 0.85rem; opacity: 0.9; }
    
    .chart-card { background-color: white; border-radius: 0; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px; height: 380px !important; display: flex; flex-direction: column; overflow: hidden; } 
    .chart-header { background-color: #4CAF50 !important; color: white !important; padding: 8px 15px; font-weight: bold; font-size: 0.9rem; text-transform: uppercase; display: flex !important; justify-content: space-between !important; align-items: center !important; height: 45px; min-height: 45px; } 
    .chart-body, .chart-container-inner { padding: 10px; flex-grow: 1; position: relative; height: 335px !important; width: 100%; overflow: hidden; }
    .chart-select { width: auto !important; font-size: 0.8rem !important; padding: 2px 25px 2px 8px !important; height: 28px !important; border-color: white !important; color: #2E7D32 !important; background-color: white !important; font-weight: bold !important; cursor: pointer; background-position: right 5px center; }
    .btn-chart-reset { background: transparent; border: 1px solid rgba(255,255,255,0.5); color: white; padding: 2px 6px; font-size: 0.75rem; border-radius: 4px; margin-left: 8px; transition: all 0.2s; cursor: pointer; }
    .btn-chart-reset:hover { background: rgba(255,255,255,0.2); color: #fff; transform: rotate(180deg); }

    .nav-tabs .nav-link { color: #555; font-weight: 700; font-size: 1.0rem; border-radius: 8px 8px 0 0; border: 1px solid #dcdcdc; border-bottom: none; margin-right: 4px; padding: 10px 25px; background: linear-gradient(to bottom, #ffffff 0%, #f1f1f1 100%); box-shadow: 0 -2px 5px rgba(0,0,0,0.05); position: relative; transition: all 0.2s ease; }
    .nav-tabs .nav-link:hover { background: linear-gradient(to bottom, #ffffff 0%, #e0e0e0 100%); color: #2E7D32; }
    .nav-tabs .nav-link.active { background: linear-gradient(180deg, #2E7D32 0%, #256b29 100%); color: #fff !important; border-color: #1b5e20; box-shadow: 0 -3px 8px rgba(46, 125, 50, 0.4); transform: translateY(-3px); z-index: 10; text-shadow: 0 1px 2px rgba(0,0,0,0.3); padding-bottom: 12px; }
    .main-tabs { border-bottom: 3px solid #2E7D32; margin-bottom: 15px; background-color: transparent; display: flex; align-items: flex-end; padding-left: 5px; }
    
    #userGreeting { cursor: pointer; transition: opacity 0.2s; margin-right: 40px !important; padding-right: 20px; border-right: 2px solid #e0e0e0; } #userGreeting:hover { opacity: 0.8; text-decoration: underline; }
    .filter-section { background-color: #f8f9fa; border: 1px solid #e9ecef; border-radius: 6px; padding: 10px; margin-bottom: 15px; }
    .table-custom-header th { background-color: #4CAF50 !important; color: white !important; vertical-align: middle; white-space: nowrap; } .table td { white-space: nowrap; vertical-align: middle; cursor: pointer; } 
    .status-active { color: #2E7D32; font-weight: bold; } .status-inactive { color: #d32f2f; font-weight: bold; } .activity-done { color: #2E7D32; font-weight: bold; } .activity-ny { color: #d32f2f; font-weight: bold; } 
    
    #loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.98); z-index: 9999; display: flex; justify-content: center; align-items: center; flex-direction: column; } #errorMessage { max-width: 80%; text-align: center; } .loading-text { margin-top: 15px; color: #2E7D32; font-weight: bold; font-size: 1.2rem; text-align: center; } .hourglass-loader { display: inline-block; font-size: 4rem; color: #2E7D32; animation: spin-hourglass 2s infinite linear; } @keyframes spin-hourglass { 0% { transform: rotate(0deg); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
    
    .modal-header-custom { background-color: var(--modal-header-bg); color: var(--modal-header-text); border-radius: 0; }
    .btn-edit-custom { background-color: var(--edit-btn-bg); color: white; border: none; } .btn-edit-custom:hover { background-color: #EF6C00; color: white; }
    
    /* 3. PHẦN MỚI: CẤU HÌNH CHI TIẾT & IN ẤN A4 */
    @media (min-width: 1200px) { .modal-a4-fit { max-width: 210mm !important; } } /* Chiều rộng chuẩn A4 */
    @media (min-width: 992px) and (max-width: 1199px) { .modal-a4-fit { max-width: 95vw !important; } }

    /* Tiêu đề từng phần (Section Header) */
    .section-title {
        background-color: #f1f8e9;
        color: #1B5E20;
        font-weight: bold;
        font-size: 1.1rem;
        padding: 8px 12px;
        margin-top: 20px;
        margin-bottom: 15px;
        border-left: 5px solid #2E7D32;
        border-bottom: 1px solid #c8e6c9;
        text-transform: uppercase;
        display: flex;
        align-items: center;
        width: 100%;
    }
    .section-title i { margin-right: 10px; }

    /* Lưới 3 cột (Grid System) */
    .detail-grid-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 3 cột đều nhau */
        gap: 10px 20px;
        margin-bottom: 15px;
    }
    .detail-item {
        display: flex;
        flex-direction: column;
        border-bottom: 1px dotted #ccc;
        padding-bottom: 4px;
        margin-bottom: 4px;
    }
    .field-label {
        color: var(--label-color);
        font-weight: 700;
        font-size: 0.8rem;
        text-transform: uppercase;
        margin-bottom: 2px;
    }
    .field-value {
        color: #000;
        font-weight: 500;
        font-size: 0.95rem;
        word-wrap: break-word;
        min-height: 1.2em;
    }

    /* Bảng con cho Plots/Yearly */
    .sub-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.8rem;
        margin-bottom: 10px;
    }
    .sub-table th {
        background-color: #e8f5e9;
        color: #1B5E20;
        border: 1px solid #ccc;
        padding: 6px;
        text-align: center;
        font-weight: bold;
        white-space: nowrap;
    }
    .sub-table td {
        border: 1px solid #ccc;
        padding: 6px;
        vertical-align: middle;
        text-align: center;
    }
    .sub-table td.text-start { text-align: left !important; }
    .sub-table td.text-end { text-align: right !important; }

    /* --- CẤU HÌNH IN ẤN (PRINT MODE) --- */
    .print-header-layout, .print-footer-layout, .print-main-title { display: none; }
    
    @media print {
        @page { size: A4 portrait; margin: 10mm; }
        
        /* Ẩn tất cả ngoại trừ Modal */
        body * { visibility: hidden; }
        #farmerDetailModal, #farmerDetailModal * { visibility: visible; }

        /* Định vị Modal full trang */
        #farmerDetailModal {
            position: absolute; left: 0; top: 0; margin: 0; padding: 0;
            width: 100%; min-height: 100%; background: white; border: none;
        }
        .modal-dialog { margin: 0 !important; padding: 0 !important; max-width: 100% !important; width: 100% !important; }
        .modal-content { border: none !important; box-shadow: none !important; }
        .modal-header, .modal-footer, .no-print, .btn-close, #modalActions { display: none !important; }
        .modal-body { padding: 0 !important; overflow: visible !important; }

        /* Hiện Header/Footer in ấn */
        .print-header-layout {
            display: flex !important;
            border-bottom: 2px solid #2E7D32;
            padding-bottom: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        .print-logo-col { width: 20%; text-align: left; }
        .print-logo-img { max-height: 70px; }
        .print-text-col { width: 80%; text-align: center; }
        .print-project-name-vi { font-size: 14pt; font-weight: bold; color: #2E7D32; display: block; text-transform: uppercase; }
        .print-project-name-en { font-size: 10pt; font-style: italic; color: #000; }
        
        .print-main-title {
            display: block !important;
            font-size: 16pt; font-weight: bold; color: #2E7D32;
            margin: 10px 0; text-align: center;
            border-bottom: 1px dashed #ccc; padding-bottom: 10px;
        }

        .print-footer-layout {
            display: flex !important;
            justify-content: space-between;
            border-top: 1px solid #000;
            margin-top: 20px; padding-top: 5px; font-size: 9pt;
            position: fixed; bottom: 0; left: 0; width: 100%;
        }

        /* Layout in ấn */
        .detail-grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr; /* 3 cột cứng */
            gap: 15px;
            page-break-inside: avoid;
        }
        .section-title {
            background-color: transparent !important;
            color: #000 !important;
            border-bottom: 2px solid #000 !important;
            border-left: none !important;
            padding-left: 0 !important;
            page-break-after: avoid;
        }
        .sub-table th { background-color: #ddd !important; color: #000 !important; border: 1px solid #000; font-size: 7.5pt; }
        .sub-table td { border: 1px solid #000; color: #000; font-size: 7.5pt; }
        .field-label { font-size: 7pt; }
        .field-value { font-size: 8.5pt; }
        tr { page-break-inside: avoid; }
    }