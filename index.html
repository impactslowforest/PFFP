<!DOCTYPE html>
<html lang="vi">

<head>
    <base target="_top">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dashboard DGBP - Final</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-bs5/1.13.4/dataTables.bootstrap5.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="loading">
        <div class="hourglass-loader"><i class="fas fa-hourglass-half"></i></div>
        <div class="loading-text mt-3 fw-bold text-success fs-5">
            <div>Đang tải dữ liệu hệ thống...</div>
            <div class="fs-6 fw-normal fst-italic">System loading...</div>
        </div>
        <div id="errorMessage" class="text-danger mt-2 fw-bold" style="display:none;"></div>
    </div>

    <div id="loginSection" style="display:none;">
        <div class="login-wrapper">
            <div class="login-brand-side">
                <div class="login-logo-container"><img
                        src="https://github.com/impactslowforest/Logo/blob/main/logo.png"
                        alt="Logo" class="login-logo-main"></div>
                <div class="login-project-vi">SẢN XUẤT CÀ PHÊ SINH THÁI VÀ CẢI THIỆN RỪNG TỰ NHIÊN</div>
                <div class="login-project-en">PROSPEROUS FARMERS AND FORESTS PARTNERSHIP</div>
            </div>
            <div class="login-form-side">
                <div class="login-card">
                    <div class="d-flex justify-content-end mb-2"><button class="btn btn-lang" onclick="toggleLanguage()"
                            title="Switch Language"><span id="loginLangIcon"><img src="https://flagcdn.com/w40/gb.png"
                                    class="flag-icon" alt="English"></span></button></div>
                    <div class="login-intro-text" data-i18n="lblSelectOrg">Vui lòng chọn tổ chức:</div>
                    <div class="org-btn-group">
                        <button type="button" class="btn btn-org" onclick="filterUserByOrg('WFI', this)"><img
                                src="https://cdn.freebiesupply.com/logos/large/2x/wwf-4-logo-black-and-white.png"
                                class="org-icon" alt="WFI"> WWF Finland</button>
                        <button type="button" class="btn btn-org" onclick="filterUserByOrg('WFV', this)"><img
                                src="https://cdn.freebiesupply.com/logos/large/2x/wwf-4-logo-black-and-white.png"
                                class="org-icon" alt="WFV"> WWF-Việt Nam</button>
                        <button type="button" class="btn btn-org" onclick="filterUserByOrg('SLO', this)"><img
                                src="https://www.deli-news.dk/wp-content/uploads/2024/11/Master-SLOW-Logo-1-1024x1024.png"
                                class="org-icon" alt="SLO"> Slow Forest</button>
                    </div>
                    <hr class="login-divider">
                    <form id="loginForm" onsubmit="event.preventDefault(); handleLogin();">
                        <div class="login-form-group"><label class="fw-bold mb-1" data-i18n="lblUsername">Tên nhân viên
                                (Staff Name)</label><select class="form-select" id="loginUserSelect" required disabled>
                                <option value="" disabled selected data-i18n="optSelectOrgFirst">-- Chọn tổ chức trước
                                    --</option>
                            </select></div>
                        <div class="login-form-group"><label class="fw-bold mb-1" data-i18n="lblPassword">Mật khẩu
                                (Password)</label><input type="password" class="form-control" id="loginPassword"
                                placeholder="*****" required></div>
                        <div id="loginError" class="text-danger mb-3 fw-bold small" style="display:none;"></div>
                        <button type="submit" class="login-btn" data-i18n="btnLogin">ĐĂNG NHẬP</button>


                        <div class="d-flex justify-content-between mt-3">
                            <a href="#" onclick="showRegisterModal()"
                                class="text-decoration-none small fw-bold text-primary">
                                <i class="fas fa-user-plus"></i> Đăng ký tài khoản / Sign up
                            </a>
                            <a href="#" onclick="window.showForgotPasswordModal()"
                                class="text-decoration-none small text-success fw-bold">
                                <i class="fas fa-key"></i> Quên mật khẩu? / Forget password?
                            </a>
                        </div>

                    </form>
                    <div class="login-footer">&copy; 2025 PFFP Dashboard. Contact Admin for support.</div>
                </div>
            </div>
        </div>
    </div>

    <div id="dashboardSection">
        <div class="navbar-custom">
            <div class="header-content">
                <div><img
                        src="https://raw.githubusercontent.com/impactslowforest/Coffee-dashboard-v2/refs/heads/main/logo.png"
                        alt="Logo" class="app-logo"></div>
                <div class="app-title">
                    <span class="title-vi">SẢN XUẤT CÀ PHÊ SINH THÁI VÀ CẢI THIỆN RỪNG TỰ NHIÊN</span>
                    <span class="title-en">PROSPEROUS FARMERS AND FORESTS PARTNERSHIP</span>
                </div>
                <div class="d-flex align-items-center">
                    <button class="btn btn-lang" onclick="toggleLanguage()" id="langBtn" title="Switch Language"><img
                            src="https://flagcdn.com/w40/gb.png" class="flag-icon" alt="English"></button>
                    <button class="btn btn-sm btn-outline-light ms-2" onclick="logout()" title="Sign Out"><i
                            class="fas fa-sign-out-alt"></i></button>
                </div>
            </div>
        </div>

        <div class="container-fluid mt-3 mb-5">
            <div class="row g-2 mb-3">
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi1">0</div>
                        <div class="kpi-label" data-i18n="kpi1">Tổng số hộ</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi2">0</div>
                        <div class="kpi-label" data-i18n="kpi2">Tổng số lô</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi3">0</div>
                        <div class="kpi-label" data-i18n="kpi3">Tổng DT (ha)</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi4">0</div>
                        <div class="kpi-label" data-i18n="kpi4">Cây che bóng</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi5">0</div>
                        <div class="kpi-label" data-i18n="kpi5">Cây HT đã trồng</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi6">0</div>
                        <div class="kpi-label" data-i18n="kpi6">Tổng số loài</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi7">0</div>
                        <div class="kpi-label" data-i18n="kpi7">Tổng nhóm hộ</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi8">0%</div>
                        <div class="kpi-label" data-i18n="kpi8">Tỷ lệ hoàn thành</div>
                    </div>
                </div>
                <div class="col-6 col-md-2">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi9">0%</div>
                        <div class="kpi-label" data-i18n="kpi9">Tỷ lệ sống</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi10">0.00</div>
                        <div class="kpi-label" data-i18n="kpi10">Tổng SL Đại trà (Tấn)</div>
                    </div>
                </div>
                <div class="col-6 col-md-3">
                    <div class="kpi-card">
                        <div class="kpi-value" id="kpi11">0.00</div>
                        <div class="kpi-label" data-i18n="kpi11">Tổng SL CLC (Tấn)</div>
                    </div>
                </div>
            </div>

            <div class="filter-section">
                <div class="row g-2 align-items-end">
                    <div class="col-6 col-md-2 col-lg-1">
                        <div class="filter-label" data-i18n="filterYear">Năm</div>
                        <div class="dropdown" id="dropdownYear"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterYear"><span class="text-truncate"
                                    id="btnFilterYearText" data-i18n="allOption">Tất cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="year" id="year_all" checked><label
                                            class="form-check-label fw-bold" for="year_all" data-i18n="allOption">Tất
                                            cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="yearListContainer"></div>
                            </ul>
                        </div>
                    </div>

                    <div class="col-6 col-md-2 col-lg-1">
                        <div class="filter-label" data-i18n="filterYearSupport">Năm hỗ trợ</div>
                        <div class="dropdown" id="dropdownYearSupport"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterYearSupport"><span
                                    class="text-truncate" id="btnFilterYearSupportText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="yearSupport" id="yearSupport_all" checked><label
                                            class="form-check-label fw-bold" for="yearSupport_all"
                                            data-i18n="allOption">Tất cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="yearSupportListContainer"></div>
                            </ul>
                        </div>
                    </div>

                    <div class="col-6 col-md-3 col-lg-2">
                        <div class="filter-label" data-i18n="filterVillage">Nhóm hộ</div>
                        <div class="dropdown" id="dropdownVillage"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterVillage"><span
                                    class="text-truncate" id="btnFilterVillageText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="village" id="village_all" checked><label
                                            class="form-check-label fw-bold" for="village_all" data-i18n="allOption">Tất
                                            cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="villageListContainer"></div>
                            </ul>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 col-lg-1">
                        <div class="filter-label" data-i18n="filterStatus">Trạng thái</div>
                        <div class="dropdown" id="dropdownStatus"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterStatus"><span class="text-truncate"
                                    id="btnFilterStatusText" data-i18n="allOption">Tất cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="status" id="status_all" checked><label
                                            class="form-check-label fw-bold" for="status_all" data-i18n="allOption">Tất
                                            cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="statusListContainer"></div>
                            </ul>
                        </div>
                    </div>
                    <div class="col-6 col-md-2 col-lg-2">
                        <div class="filter-label" data-i18n="thEthnicity">Dân tộc</div>
                        <div class="dropdown" id="dropdownEthnicity"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterEthnicity"><span
                                    class="text-truncate" id="btnFilterEthnicityText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="ethnicity" id="ethnicity_all" checked><label
                                            class="form-check-label fw-bold" for="ethnicity_all"
                                            data-i18n="allOption">Tất cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="ethnicityListContainer"></div>
                            </ul>
                        </div>
                    </div>

                    <div class="col-6 col-md-2 col-lg-2">
                        <div class="filter-label" data-i18n="filterManageBy">Quản lý bởi</div>
                        <div class="dropdown" id="dropdownManageBy"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterManageBy"><span
                                    class="text-truncate" id="btnFilterManageByText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="manageBy" id="manageBy_all" checked><label
                                            class="form-check-label fw-bold" for="manageBy_all"
                                            data-i18n="allOption">Tất cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="manageByListContainer"></div>
                            </ul>
                        </div>
                    </div>

                    <div class="col-6 col-md-3 col-lg-1">
                        <div class="filter-label" data-i18n="filterSupported">Hỗ trợ bởi</div>
                        <div class="dropdown" id="dropdownSupported"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterSupported"><span
                                    class="text-truncate" id="btnFilterSupportedText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="supported" id="supported_all" checked><label
                                            class="form-check-label fw-bold" for="supported_all"
                                            data-i18n="allOption">Tất cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="supportedListContainer"></div>
                            </ul>
                        </div>
                    </div>
                    <div class="col-6 col-md-3 col-lg-1">
                        <div class="filter-label" data-i18n="filterSupportedTypes">Loại hỗ trợ</div>
                        <div class="dropdown" id="dropdownSupportedTypes"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterSupportedTypes"><span
                                    class="text-truncate" id="btnFilterSupportedTypesText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="supportedTypes" id="supportedTypes_all" checked><label
                                            class="form-check-label fw-bold" for="supportedTypes_all"
                                            data-i18n="allOption">Tất cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="supportedTypesListContainer"></div>
                            </ul>
                        </div>
                    </div>
                    <div class="col-12 col-md-2 col-lg-1">
                        <div class="filter-label" data-i18n="filterSpecies">Loài cây</div>
                        <div class="dropdown" id="dropdownSpecies"><button
                                class="btn btn-sm btn-outline-secondary dropdown-toggle w-100 text-start d-flex justify-content-between align-items-center bg-white"
                                type="button" data-bs-toggle="dropdown" id="btnFilterSpecies"><span
                                    class="text-truncate" id="btnFilterSpeciesText" data-i18n="allOption">Tất
                                    cả</span></button>
                            <ul class="dropdown-menu dropdown-menu-custom p-2">
                                <li>
                                    <div class="form-check"><input class="form-check-input check-all" type="checkbox"
                                            data-group="species" id="species_all" checked><label
                                            class="form-check-label fw-bold" for="species_all" data-i18n="allOption">Tất
                                            cả</label></div>
                                </li>
                                <li>
                                    <hr class="dropdown-divider my-1">
                                </li>
                                <div id="speciesListContainer"></div>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <ul class="nav nav-tabs main-tabs align-items-center" id="mainTab" role="tablist">
                <li class="nav-item" role="presentation"><button class="nav-link active" id="dashboard-main-tab"
                        data-bs-toggle="tab" data-bs-target="#dashboard-main-pane" type="button" role="tab"><i
                            class="fas fa-chart-line"></i> Dashboard</button></li>
                <li class="nav-item" role="presentation"><button class="nav-link" id="analytics-main-tab"
                        data-bs-toggle="tab" data-bs-target="#analytics-main-pane" type="button" role="tab"><i
                            class="fas fa-chart-pie"></i> <span data-i18n="tabAnalytics">Phân tích dữ
                            liệu</span></button></li>
                <li class="nav-item d-flex align-items-center gap-2 ms-auto py-1">
                    <div class="filter-actions d-flex gap-1 me-3">
                        <button class="btn btn-sm btn-outline-secondary" onclick="resetFilters()"><i
                                class="fas fa-undo"></i> <span data-i18n="btnReset">Reset</span></button>
                        <button class="btn btn-sm btn-outline-info" onclick="refreshData()"><i class="fas fa-sync"></i>
                            <span data-i18n="btnRefresh">Reload</span></button>
                        <button class="btn btn-sm btn-outline-success" onclick="exportTable()"><i
                                class="fas fa-file-excel"></i> <span data-i18n="btnExport">Export</span></button>
                    </div>
                    <div id="userGreeting" class="user-greeting" style="display:none;"></div>
                </li>


                <li class="nav-item" role="presentation" id="config-main-tab-li" style="display:none;">
                    <button class="nav-link position-relative" id="config-main-tab" data-bs-toggle="tab"
                        data-bs-target="#config-main-pane" type="button" role="tab">
                        <i class="fas fa-cogs"></i> <span data-i18n="tabConfig">Cấu hình</span>

                        <span id="pendingCountBadge"
                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                            style="display:none; font-size: 0.65rem;">
                            0
                            <span class="visually-hidden">unread messages</span>
                        </span>
                    </button>
                </li>


            </ul>

            <div class="tab-content" id="mainTabContent">

                <div class="tab-pane fade show active" id="dashboard-main-pane" role="tabpanel" tabindex="0">
                    <div class="row mt-3">
                        <div class="col-md-12 col-lg-3">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chartParticipationTitle">Sự tham gia qua các năm</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-body"><canvas id="chartParticipation"></canvas></div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chartStatusTitle">Tình trạng hoạt động (Status)</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-body"><canvas id="chartStatus"></canvas></div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chart4Title">Tỷ lệ Hoàn thành</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-body"><canvas id="chartCompletion"></canvas></div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chartManageByTitle">Đơn vị quản lý</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-body"><canvas id="chartManageBy"></canvas></div>
                            </div>
                        </div>

                        <div class="col-md-12 col-lg-9">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chart3Title">Tiến độ theo nhóm hộ</span>
                                    <div class="d-flex align-items-center">
                                        <select id="filterTopProgress" class="form-select form-select-sm chart-select"
                                            onchange="reDrawDashboardCharts()">
                                            <option value="All" data-i18n="optAll">Tất cả</option>
                                            <option value="3">Top 3</option>
                                            <option value="5">Top 5</option>
                                            <option value="10">Top 10</option>
                                        </select>
                                        <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                                class="fas fa-sync-alt"></i></button>
                                    </div>
                                </div>
                                <div class="chart-body"><canvas id="chartActivity"></canvas></div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-3">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chartTrainingTitle">Tham gia tập huấn & Op6</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-body"><canvas id="chartTraining"></canvas></div>
                            </div>
                        </div>

                        <div class="col-md-12 col-lg-8">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chartSupportStatusTitle">Hộ tham gia theo nhóm hộ</span>
                                    <div class="d-flex align-items-center">
                                        <select id="filterTopSupport" class="form-select form-select-sm chart-select"
                                            onchange="reDrawDashboardCharts()">
                                            <option value="All" data-i18n="optAll">Tất cả</option>
                                            <option value="3">Top 3</option>
                                            <option value="5">Top 5</option>
                                            <option value="10">Top 10</option>
                                        </select>
                                        <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                                class="fas fa-sync-alt"></i></button>
                                    </div>
                                </div>
                                <div class="chart-body"><canvas id="chartSupportStatus"></canvas></div>
                            </div>
                        </div>
                        <div class="col-md-12 col-lg-4">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chart2Title">Tỷ lệ thành phần dân tộc</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-body"><canvas id="chartEthnicity"></canvas></div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm rounded-0 mb-5 mt-3">
                        <div class="card-header bg-white p-0">
                            <ul class="nav nav-tabs card-header-tabs m-0" id="dataTabs" role="tablist">
                                <li class="nav-item"><button class="nav-link active" id="farmers-tab"
                                        data-bs-toggle="tab" data-bs-target="#farmers-pane" type="button"
                                        data-i18n="tabFarmers">Hộ dân</button></li>
                                <li class="nav-item"><button class="nav-link" id="plots-tab" data-bs-toggle="tab"
                                        data-bs-target="#plots-pane" type="button" data-i18n="tabPlots">Lô đất</button>
                                </li>
                                <li class="nav-item"><button class="nav-link" id="yearly-tab" data-bs-toggle="tab"
                                        data-bs-target="#yearly-pane" type="button" data-i18n="tabYearly">Dữ liệu hàng
                                        năm</button></li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="farmers-pane">
                                    <div class="table-responsive">
                                        <table id="mainTable" class="table table-striped table-hover table-sm w-100"
                                            style="font-size: 0.8rem;">
                                            <thead class="table-custom-header">
                                                <tr>
                                                    <th data-i18n="thNo">TT</th>
                                                    <th data-i18n="thYear">Năm TG</th>
                                                    <th data-i18n="thFarmerID">Mã Nông Hộ</th>
                                                    <th data-i18n="thName">Họ tên</th>
                                                    <th data-i18n="thYOB">Năm sinh</th>
                                                    <th data-i18n="thGender">Giới tính</th>
                                                    <th data-i18n="thPhone">Số điện thoại</th>
                                                    <th data-i18n="thGroup">Nhóm hộ</th>
                                                    <th data-i18n="thCoop">Tổ hợp tác</th>
                                                    <th data-i18n="thVillage">Nhóm hộ</th>
                                                    <th data-i18n="thCommune">Xã</th>
                                                    <th data-i18n="thAddress">Địa chỉ</th>
                                                    <th data-i18n="thIDCard">Số CCCD</th>
                                                    <th data-i18n="thEthnicity">Dân tộc</th>
                                                    <th data-i18n="thEcoStatus">Tình trạng KT</th>
                                                    <th data-i18n="thHHCircum">Hoàn cảnh GĐ</th>
                                                    <th data-i18n="thMemCount">Số TV GĐ</th>
                                                    <th data-i18n="thWorkerCount">Tổng LĐ</th>
                                                    <th data-i18n="thTotalArea">Tổng DT CP</th>
                                                    <th data-i18n="thPlotCount">Số lượng lô</th>
                                                    <th data-i18n="thSupportedBy">Được HT bởi</th>
                                                    <th data-i18n="thSupportType">Loại hỗ trợ</th>
                                                    <th data-i18n="thRegFarms">Số vườn ĐK</th>
                                                    <th data-i18n="thRegArea">Tổng DT ĐK</th>
                                                    <th data-i18n="thStaff">Cán bộ nhập</th>
                                                    <th data-i18n="thStatus">Trạng thái</th>
                                                    <th data-i18n="thActivity">Hoạt động</th>
                                                    <th data-i18n="thDate">Ngày</th>
                                                    <th data-i18n="thUpdate">Cập nhật</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="plots-pane">
                                    <div class="table-responsive">
                                        <table id="plotsTable" class="table table-striped table-hover table-sm w-100"
                                            style="font-size: 0.8rem;">
                                            <thead class="table-custom-header">
                                                <tr>
                                                    <th data-i18n="thNo">TT</th>
                                                    <th data-i18n="thPlotId">Mã Lô</th>
                                                    <th data-i18n="thFarmerID">Mã Nông Hộ</th>
                                                    <th data-i18n="thName">Họ tên</th>
                                                    <th data-i18n="thPlotName">Tên Lô</th>
                                                    <th data-i18n="thPlotArea">DT (ha)</th>
                                                    <th data-i18n="thLURC">Có GCNQSDĐ?</th>
                                                    <th data-i18n="thBorderForest">Giáp rừng TN</th>
                                                    <th data-i18n="thSeedlingSource">Nguồn giống</th>
                                                    <th data-i18n="thPlaceName">Địa danh</th>
                                                    <th data-i18n="thLocation">Tọa độ</th>
                                                    <th data-i18n="thShadeTreesBefore">SL cây CB trước</th>
                                                    <th data-i18n="thNameTreesBefore">Tên cây CB trước</th>
                                                    <th data-i18n="thFarmRegSupport">Nông trại ĐK HT</th>
                                                    <th data-i18n="thCoffeeTrees">SL cây CP</th>
                                                    <th data-i18n="thPlantYear">Năm trồng CP</th>
                                                    <th data-i18n="thNotes">Ghi chú</th>
                                                    <th data-i18n="thShadeTreeCount">SL cây CB</th>
                                                    <th data-i18n="thSpeciesCount">SL loài cây</th>
                                                    <th data-i18n="thMapSheet">Tờ bản đồ</th>
                                                    <th data-i18n="thSubMap">Thửa đất</th>
                                                    <th data-i18n="thStatus">Tình trạng</th>
                                                    <th data-i18n="thActivity">Hoạt động</th>
                                                    <th data-i18n="thUpdate">Cập nhật</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="yearly-pane">
                                    <div class="table-responsive">
                                        <table id="yearlyTable" class="table table-striped table-hover table-sm w-100"
                                            style="font-size: 0.8rem;">
                                            <thead class="table-custom-header">
                                                <tr>
                                                    <th data-i18n="thNo">TT</th>
                                                    <th data-i18n="thFarmerID">Mã Nông Hộ</th>
                                                    <th data-i18n="thName">Họ tên</th>
                                                    <th data-i18n="thRecordID">Mã Bản ghi</th>
                                                    <th data-i18n="thYearVal">Năm</th>
                                                    <th data-i18n="thCherryVol">SL quả tươi</th>
                                                    <th data-i18n="thVolHQ">SL CLC</th>
                                                    <th data-i18n="thIncome">Tổng thu nhập</th>
                                                    <th data-i18n="thFertApplied">Có bón phân?</th>
                                                    <th data-i18n="thFertName">Tên phân bón</th>
                                                    <th data-i18n="thFertVol">Lượng phân</th>
                                                    <th data-i18n="thFertCost">Chi phí phân</th>
                                                    <th data-i18n="thPestApplied">Dùng thuốc BVTV?</th>
                                                    <th data-i18n="thPestName">Tên thuốc BVTV</th>
                                                    <th data-i18n="thPestVol">Lượng thuốc</th>
                                                    <th data-i18n="thPestCost">Chi phí thuốc</th>
                                                    <th data-i18n="thHerbApplied">Dùng thuốc cỏ?</th>
                                                    <th data-i18n="thHerbName">Tên thuốc cỏ</th>
                                                    <th data-i18n="thHerbVol">Lượng thuốc cỏ</th>
                                                    <th data-i18n="thHerbCost">CP thuốc cỏ</th>
                                                    <th data-i18n="thLaborCost">Thuê nhân công</th>
                                                    <th data-i18n="thOtherCost">Chi phí khác</th>
                                                    <th data-i18n="thTreeSupportBy">HT cây CB bởi</th>
                                                    <th data-i18n="thTreesPlanted">Số cây đã trồng</th>
                                                    <th data-i18n="thSpecies">Loài cây</th>
                                                    <th data-i18n="thYearPlanted">Năm trồng</th>
                                                    <th data-i18n="thTreesDead">Số cây chết</th>
                                                    <th data-i18n="thSurvivalRate">Tỷ lệ sống</th>
                                                    <th data-i18n="thFertWWF">Phân từ WWF</th>
                                                    <th data-i18n="thLimeSlow">Vôi từ SLOW</th>
                                                    <th data-i18n="thCoverCrop">Cỏ che phủ</th>
                                                    <th data-i18n="thSoilTest">HT KT đất</th>
                                                    <th data-i18n="thTraining">Tập huấn</th>
                                                    <th data-i18n="thOp6">HĐ OP6</th>
                                                    <th data-i18n="thRegSales">ĐK bán SLOW</th>
                                                    <th data-i18n="thRealSales">Thực bán SLOW</th>
                                                    <th data-i18n="thRevSales">Thu từ bán</th>
                                                    <th data-i18n="thBoughtVia">Mua qua sơ chế</th>
                                                    <th data-i18n="thStatus">Tình trạng</th>
                                                    <th data-i18n="thActivity">Hoạt động</th>
                                                    <th data-i18n="thUpdate">Cập nhật</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="analytics-main-pane" role="tabpanel" tabindex="0">
                    <div class="row g-3 mb-4 mt-1">
                        <div class="col-12 col-lg-6">
                            <div class="analytics-card">
                                <div class="chart-header">
                                    <span data-i18n="chart1Title">Tổng diện tích theo nhóm hộ</span>
                                    <div class="d-flex align-items-center">
                                        <select id="filterTopArea" class="form-select form-select-sm chart-select"
                                            onchange="reDrawAnalyticsCharts()">
                                            <option value="All" data-i18n="optAll">Tất cả</option>
                                            <option value="3">Top 3</option>
                                            <option value="5">Top 5</option>
                                            <option value="10">Top 10</option>
                                        </select>
                                        <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                                class="fas fa-sync-alt"></i></button>
                                    </div>
                                </div>
                                <div class="chart-body"><canvas id="chartAreaByVillage"></canvas></div>
                            </div>
                        </div>
                        <div class="col-12 col-lg-6">
                            <div class="analytics-card">
                                <div class="chart-header">
                                    <span data-i18n="chartProductivityTitle">Tổng sản lượng (Tấn) theo nhóm hộ</span>
                                    <div class="d-flex align-items-center">
                                        <select id="filterTopProd" class="form-select form-select-sm chart-select"
                                            onchange="reDrawAnalyticsCharts()">
                                            <option value="All" data-i18n="optAll">Tất cả</option>
                                            <option value="3">Top 3</option>
                                            <option value="5">Top 5</option>
                                            <option value="10">Top 10</option>
                                        </select>
                                        <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                                class="fas fa-sync-alt"></i></button>
                                    </div>
                                </div>
                                <div class="chart-body"><canvas id="chartProductivity"></canvas></div>
                            </div>
                        </div>

                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="analytics-card">
                                <div class="chart-header">
                                    <span data-i18n="chartFinanceTitle">Tổng thu nhập / Chi phí</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-container-inner"><canvas id="chartFinance"></canvas></div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="analytics-card">
                                <div class="chart-header">
                                    <span data-i18n="chartShadeTreesTitle">Cây che bóng</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-container-inner"><canvas id="chartShadeTrees"></canvas></div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="analytics-card">
                                <div class="chart-header">
                                    <span data-i18n="chartSlowSalesTitle">Sản lượng bán cho SLOW</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-container-inner"><canvas id="chartSlowSales"></canvas></div>
                            </div>
                        </div>
                        <div class="col-12 col-md-6 col-lg-3">
                            <div class="analytics-card">
                                <div class="chart-header">
                                    <span data-i18n="chartQualityTitle">Sản lượng CLC / Tổng sản lượng</span>
                                    <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                            class="fas fa-sync-alt"></i></button>
                                </div>
                                <div class="chart-container-inner"><canvas id="chartQuality"></canvas></div>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="chart-card">
                                <div class="chart-header">
                                    <span data-i18n="chartSurvivalTitle">Tỷ lệ sống theo nhóm hộ</span>
                                    <div class="d-flex align-items-center">
                                        <select id="filterTopSurvival" class="form-select form-select-sm chart-select"
                                            onchange="reDrawAnalyticsCharts()">
                                            <option value="All" data-i18n="optAll">Tất cả</option>
                                            <option value="3">Top 3</option>
                                            <option value="5">Top 5</option>
                                            <option value="10">Top 10</option>
                                        </select>
                                        <button class="btn-chart-reset" onclick="resetFilters()" title="Reset All"><i
                                                class="fas fa-sync-alt"></i></button>
                                    </div>
                                </div>
                                <div class="chart-body"><canvas id="chartSurvivalRate"></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="config-main-pane" role="tabpanel" tabindex="0">
                    <div class="card shadow-sm rounded-0">
                        <div class="card-header bg-white">
                            <ul class="nav nav-tabs card-header-tabs" id="configTabs" role="tablist">
                                <li class="nav-item"><button class="nav-link active" id="users-tab" data-bs-toggle="tab"
                                        data-bs-target="#users-pane" type="button"><i class="fas fa-users-cog"></i>
                                        <span data-i18n="tabUserMng">Quản lý Nhân sự</span></button></li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="users-pane">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h5 class="m-0 text-success"><i class="fas fa-list-ul"></i> <span
                                                data-i18n="headerUserList">Danh sách nhân viên</span></h5><button
                                            class="btn btn-sm btn-edit-custom" onclick="showAddUserModal()"
                                            id="btnAddUser" style="display:none;"><i class="fas fa-plus"></i> <span
                                                data-i18n="btnAddUser">Thêm nhân viên</span></button>
                                    </div>
                                    <div class="table-responsive">
                                        <table id="userTable" class="table table-striped table-hover table-sm w-100"
                                            style="font-size: 0.85rem;">
                                            <thead class="table-custom-header">
                                                <tr>
                                                    <th data-i18n="thNo">TT</th>
                                                    <th data-i18n="thStaffId">Staff ID</th>
                                                    <th data-i18n="thFullName">Họ và Tên</th>
                                                    <th data-i18n="thOrg">Tổ chức</th>
                                                    <th data-i18n="thPosition">Chức vụ</th>
                                                    <th data-i18n="thArea">Phạm vi Quản lý</th>
                                                    <th data-i18n="thEmail">Email</th>
                                                    <th data-i18n="thPhone">SĐT</th>
                                                    <th data-i18n="thAuthority">Quyền hạn</th>
                                                    <th data-i18n="thStatus">Trạng thái</th>
                                                    <th data-i18n="thAction">Thao tác</th>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="farmerDetailModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog modal-a4-fit modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header modal-header-custom">
                    <h5 class="modal-title fw-bold" id="farmerDetailTitle">Chi Tiết</h5>
                    <div class="no-print" id="modalActions"></div>
                    <button type="button" class="btn-close btn-close-white ms-2 no-print"
                        data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="farmerDetailBody">
                    <div class="print-header-layout">
                        <div class="print-logo-col"><img
                                src="https://raw.githubusercontent.com/impactslowforest/Coffee-dashboard-v2/refs/heads/main/logo.png"
                                alt="Logo" class="print-logo-img"></div>
                        <div class="print-text-col">
                            <span class="print-project-name-vi">SẢN XUẤT CÀ PHÊ SINH THÁI VÀ CẢI THIỆN RỪNG TỰ
                                NHIÊN</span>
                            <span class="print-project-name-en">PROSPEROUS FARMERS AND FORESTS PARTNERSHIP</span>
                        </div>
                    </div>
                    <div id="detailContent"></div>
                    <div class="print-footer-layout" id="printFooterContent"></div>
                </div>
                <div class="modal-footer no-print"><button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal" data-i18n="btnClose">Đóng</button></div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="editFormModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static"
        data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header modal-header-custom">
                    <h5 class="modal-title fw-bold" id="editFormTitle">Sửa thông tin</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="genericForm">
                        <div id="parentInfo" class="alert alert-info mb-3 d-none"></div>
                        <div id="formFields" class="row g-3"></div>
                        <input type="hidden" id="formType"><input type="hidden" id="formId">
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        data-i18n="btnCancel">Hủy</button>
                    <button type="button" class="btn btn-edit-custom" onclick="saveData()" data-i18n="btnSave">Lưu thay
                        đổi</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="userEditModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header modal-header-custom">
                    <h5 class="modal-title fw-bold" id="userModalTitle" data-i18n="modalUserTitle">Thông tin nhân viên
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="userForm">
                        <div class="row g-3">
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblStaffId">Mã nhân viên
                                    (Staff ID)</label><input type="text" class="form-control form-control-sm"
                                    name="Staff ID" required></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblFullName">Họ và
                                    tên</label><input type="text" class="form-control form-control-sm" name="Full name"
                                    required></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblOrg">Tổ
                                    chức</label><select class="form-select form-select-sm" name="Organization" required>
                                    <option value="WFI">WWF Finland</option>
                                    <option value="WFV">WWF Vietnam</option>
                                    <option value="SLO">Slow Forest</option>
                                </select></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblPosition">Chức
                                    vụ</label><select class="form-select form-select-sm" name="Position"
                                    id="userPositionSelect"></select></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblGender">Giới
                                    tính</label><select class="form-select form-select-sm" name="Gender">
                                    <option value="Male">Nam</option>
                                    <option value="Female">Nữ</option>
                                </select></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblPassword">Mật
                                    khẩu</label><input type="password" class="form-control form-control-sm"
                                    name="Password" placeholder="******"></div>
                            <div class="col-md-6"><label class="form-label-custom"
                                    data-i18n="lblEmail">Email</label><input type="email"
                                    class="form-control form-control-sm" name="Email"></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblPhone">Số điện
                                    thoại</label><input type="text" class="form-control form-control-sm" name="Phone">
                            </div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblStatus">Trạng
                                    thái</label><select class="form-select form-select-sm" name="Status"
                                    id="userStatusSelect">
                                    <option value="Act">Active (Kích hoạt)</option>
                                    <option value="InA">Inactive (Vô hiệu hóa)</option>
                                </select></div>
                            <div class="col-md-6"><label class="form-label-custom" data-i18n="lblAuthority">Quyền hạn
                                    (Authority)</label><select class="form-select form-select-sm" name="Authority"
                                    id="userAuthoritySelect">
                                    <option value="">-- Chọn quyền --</option>
                                </select></div>
                            <div class="col-md-12"><label class="form-label-custom" data-i18n="lblArea">Phạm vi Quản lý
                                    (Manage Areas)</label><select class="form-select form-select-sm" name="Role"
                                    id="userRoleSelect" multiple></select><small
                                    class="text-muted fst-italic d-block mt-1" style="font-size: 0.75rem;">(Giữ phím
                                    Ctrl để chọn nhiều)</small></div>
                            <div class="col-md-12"><input type="hidden" name="View"><input type="hidden" name="Rule">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        data-i18n="btnCancel">Hủy</button><button type="button" class="btn btn-edit-custom"
                        onclick="saveUser()" data-i18n="btnSaveUser">Lưu nhân viên</button></div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="confirmModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content text-center p-3">
                <div class="modal-header border-0 p-0 justify-content-end"></div>
                <div class="modal-body">
                    <div id="confirmIcon"></div>
                    <h5 class="confirm-text mb-3" id="confirmMessage"></h5>
                    <div class="d-flex justify-content-center gap-2 mt-4"><button type="button"
                            class="btn btn-secondary px-4" data-bs-dismiss="modal"
                            id="btnConfirmCancel">Hủy</button><button type="button" class="btn px-4"
                            id="btnConfirmOk">Đồng ý</button></div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="forgotPasswordModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg border-0">
                <div class="modal-header bg-success text-white">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-user-lock fa-2x me-3"></i>
                        <div>
                            <h5 class="modal-title fw-bold mb-0">Khôi phục mật khẩu</h5>
                            <small class="opacity-75" style="font-size: 0.8rem;">Password Recovery</small>
                        </div>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body p-4">
                    <div class="alert alert-light border-start border-success border-4 mb-4 shadow-sm">
                        <div class="d-flex">
                            <i class="fas fa-info-circle text-success mt-1 me-2"></i>
                            <div class="small text-muted">
                                Hệ thống sẽ gửi mật khẩu mới về Email của bạn. Email nhập vào phải trùng khớp với Email
                                đã đăng ký.<br>
                                <i class="text-secondary" style="font-size: 0.75rem;">A new password will be sent to
                                    your email. The input email must match the registered record.</i>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold text-success small text-uppercase">
                            <i class="fas fa-user-tag"></i> Nhân viên / Staff Name
                        </label>
                        <input type="text" class="form-control bg-light fw-bold text-secondary" id="fpStaffName"
                            readonly>
                        <input type="hidden" id="fpStaffId">
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold text-success small text-uppercase">
                            <i class="fas fa-envelope"></i> Email đã đăng ký / Registered Email
                        </label>
                        <div class="input-group">
                            <span class="input-group-text bg-white text-muted"><i class="fas fa-at"></i></span>
                            <input type="email" class="form-control" id="fpEmailInput" placeholder="name@example.com"
                                required>
                        </div>
                    </div>

                    <div id="fpMessage" class="small fw-bold text-danger text-center mt-3"></div>
                </div>

                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">
                        <i class="fas fa-times"></i> Đóng / Close
                    </button>
                    <button type="button" class="btn btn-success btn-sm px-4 fw-bold shadow-sm"
                        onclick="window.submitForgotPassword()">
                        <i class="fas fa-paper-plane"></i> Gửi yêu cầu / Send Request
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net/1.13.4/jquery.dataTables.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/datatables.net-bs5/1.13.4/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script src="script.js"></script>





    <div class="modal fade" id="registerModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content shadow-lg border-0">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title fw-bold"><i class="fas fa-user-plus"></i> Đăng ký thành viên</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="registerForm">
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Tổ chức / Organization</label>
                            <select class="form-select" id="regOrg" required>
                                <option value="WFI">WWF Finland</option>
                                <option value="WFV">WWF Vietnam</option>
                                <option value="SLO">Slow Forest</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Họ và Tên / Full Name</label>
                            <input type="text" class="form-control" id="regName" required placeholder="Nguyen Van A">
                        </div>
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Email</label>
                            <input type="email" class="form-control" id="regEmail" required
                                placeholder="email@example.com">
                        </div>
                        <div class="mb-3">
                            <label class="form-label small fw-bold text-muted">Số điện thoại / Phone</label>
                            <input type="text" class="form-control" id="regPhone" required>
                        </div>
                        <div class="row">
                            <div class="col-6 mb-3">
                                <label class="form-label small fw-bold text-muted">Mật khẩu</label>
                                <input type="password" class="form-control" id="regPass" required>
                            </div>
                            <div class="col-6 mb-3">
                                <label class="form-label small fw-bold text-muted">Nhập lại MK</label>
                                <input type="password" class="form-control" id="regPassConfirm" required>
                            </div>
                        </div>
                        <div id="regMessage" class="small fw-bold text-danger text-center mb-2"></div>
                    </form>
                </div>
                <div class="modal-footer bg-light">
                    <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary btn-sm px-4 fw-bold"
                        onclick="window.submitRegistration()">
                        <i class="fas fa-paper-plane"></i> Gửi đăng ký
                    </button>
                </div>
            </div>
        </div>
    </div>




</body>

</html>
